//===== rAthena Script =======================================
//= Episode 11.1 Socket Enchant NPC
//===== By: ==================================================
//= rAthena Dev Team
//===== Current Version: =====================================
//= 2.0a
//===== Compatible With: =====================================
//= rAthena Project
//===== Description: =========================================
//= [Official Conversion]
//= Adds slots to selected weapons and armor.
//===== Additional Comments: =================================
//= 0.1a added missing L_No: to 2 funcs [Lupus]
//= 0.1b Removed duplicates [Toms]
//= 0.2 Added missing next;'s [Evera]
//= 0.3 Fixed Zweihander[+] id [Lupus]
//= 1.0 Fixed ingredients check [Lupus]
//= 1.1 Updated to official. [SinSloth]
//= 1.1b Optimized/cleaned [ultramage]
//= 1.2 Fixed some typos and a nasty bug. [SinSloth]
//= 1.3 Fixed a wrong item ID with Sphinx Hat. [SinSloth]
//= 1.4 Corrected NPC names to fall within proper restrictions. [L0ne_W0lf]
//= 1.5 Removed Ontouch trigger area from NPCs. [L0ne_W0lf]
//= 1.6 Replaced effect numerics with constants. [Samuray22]
//= 1.7 Adjusted prices on some armor and weapons. [L0ne_W0lf]
//= 1.8 Added missing Gae Bolg and Dragon Slayer. [Kisuka]
//= 1.9 Moved Episode 12 items to separate NPC.
//=     Some cleanup & optimization. [Gepard]
//= 2.0 Duplicates now spawn from floating NPCs. [L0ne_W0lf]
//= 2.0a Added 'disable_items' command. [Euphy]
//============================================================

-	script	Seiyablem#dummy::SocketEnchant	-1,{
	if (checkweight(1201,1) == 0)
	{
		mes "- à´ÕëÂÇ¡èÍ¹ !! -";
		mes "- ¢³Ğ¹Õé¤Ø³¡ÓÅÑ§¶×Í -";
		mes "- ÁÕ¢Í§¡Ñº¤Ø³ÁÒ¡à¡Ô¹ä» -";
		mes "- ¡ÃØ³ÒÅÍ§ãËÁèÍÕ¡¤ÃÑé§ -";
		mes "- ËÅÑ§¨Ò¡¤Ø³Å´¹éÓË¹Ñ¡Å§ -";
		close;
	}
	mes "[NPC à¨ÒĞÃÙ]";
	mes "©Ñ¹à»ç¹ÇÔÈÇ¡Ã·ÕèàªÕèÂÇªÒ­";
	mes "ã¹¡ÒÃà¨ÒĞÃÙãËé¡ÑºÍÒÇØ¸áÅĞªØ´à¡ÃÒĞ»¡µÔ";
	mes "¤èÒºÃÔ¡ÒÃ¢Í§©Ñ¹ ÇÑÊ´Ø·Õè¨Óà»ç¹";
	mes "áÅĞâÍ¡ÒÊã¹¡ÒÃ»ÃĞÊº¤ÇÒÁÊÓàÃç¨·Ñé§ËÁ´";
	mes "¢Öé¹ÍÂÙè¡ÑºÃÒÂ¡ÒÃà©¾ÒĞ·Õè©Ñ¹¡ÓÅÑ§·ÓÍÂÙè";
	next;
	mes "[NPC à¨ÒĞÃÙ]";
	mes "¡ÒÃà¾ÔèÁÊÅçÍµÍÒ¨´ÙàËÁ×Í¹§èÒÂ áµè¡ç«Ñº«éÍ¹¡ÇèÒ·Õè¤Ô´ÁÒ¡";
	mes "ËÒ¡¤Ø³Ê¹ã¨ã¹ºÃÔ¡ÒÃ¢Í§©Ñ¹ á¨é§ãËéàÃÒ·ÃÒº";
	next;
	switch(select("à¨ÒĞÃÙä»·ÕèÍÒÇØ¸:à¨ÒĞÃÙä»·Õèà¡ÃÒĞ:¢éÍÁÙÅ¡ÒÃÅÍ§ªèÍ§:Â¡àÅÔ¡"))
	{
		case 1:
			mes "[NPC à¨ÒĞÃÙ]";
			mes "¤Ø³µéÍ§¡ÒÃà¾ÔèÁªèÍ§ãËé¡ÑºÍÒÇØ¸ËÃ×ÍäÁè?";
			mes "©Ñ¹¨Ñ´ËÁÇ´ËÁÙèÍÒÇØ¸µÒÁ¤ÇÒÁÂÒ¡ã¹¡ÒÃà¾ÔèÁªèÍ§ ¤ÅÒÊ C ¹Ñé¹§èÒÂ·ÕèÊØ´ áÅĞ¤ÅÒÊ S ¹Ñé¹ÂÒ¡·ÕèÊØ´";
			mes "¤ÅÒÊäË¹·Õè¤Ø³ÍÂÒ¡ÅÍ§?";
			next;
			switch(select("¤ÅÒÊ C:¤ÅÒÊ B:¤ÅÒÊ A:¤ÅÒÊ S"))
			{
				case 1:
					mes "[NPC à¨ÒĞÃÙ]";
					mes "¤ÅÒÊ C ãªèäËÁ?";
					mes "µÍ¹¹Õé©Ñ¹ÊÒÁÒÃ¶ÍÑ¾à¡Ã´ÍØ»¡Ã³ìºÒ§ÍÂèÒ§ã¹¤ÅÒÊ¹Ñé¹ä´éà·èÒ¹Ñé¹ ´Ñ§¹Ñé¹â»Ã´àÅ×Í¡Ë¹Öè§ã¹ÃÒÂ¡ÒÃµèÍä»¹Õé à¾×èÍ·ÕèàÃÒ¨Ğä´éÅÍ§à¾ÔèÁªèÍ§à¢éÒä»";
					next;
					switch(select("Trident:Rope:Violin"))
					{
						case 1: callfunc "Func_Socket",1460,1461,40,66,200,1010,10;
						case 2: callfunc "Func_Socket",1950,1951,40,66,200,1010,10;
						case 3: callfunc "Func_Socket",1901,1902,40,66,200,1010,10;
					}
				case 2:
					mes "[NPC à¨ÒĞÃÙ]";
					mes "¤ÅÒÊºÕ?";
					mes "àÍÒÅèĞ ¹Õè¤×ÍËÁÇ´ËÁÙèÍØ»¡Ã³ìâ´Âà©ÅÕèÂ";
					mes "â»Ã´àÅ×Í¡ÍÒÇØ¸·Õè¤Ø³µéÍ§¡ÒÃãËé©Ñ¹ÅÍ§à¾ÔèÁªèÍ§";
					next;
					switch(select("Chain:Gladius:Gakkung Bow:Pike:Haedonggum:Lute:Wire:Waghnakh:Arbalest Bow"))
					{
						case 1: callfunc "Func_Socket",1519,1520,40,61,300,1010,10;
						case 2: callfunc "Func_Socket",1219,1220,40,61,300, 984, 1,999,5;
						case 3: callfunc "Func_Socket",1714,1716,40,61,300, 984, 2,999,5;
						case 4: callfunc "Func_Socket",1407,1408,40,61,200,1010,10;
						case 5: callfunc "Func_Socket",1123,1128,40,61,300, 984, 2,999,5;
						case 6: callfunc "Func_Socket",1905,1906,40,61,300,1011,10;
						case 7: callfunc "Func_Socket",1954,1955,40,61,300,1011,10;
						case 8: callfunc "Func_Socket",1801,1802,40,61,300,1010,10;
						case 9: callfunc "Func_Socket",1713,1715,40,61,300, 984, 2,999,5;
					}
				case 3:
					mes "[NPC à¨ÒĞÃÙ]";
					mes "âÍé ¤ÅÒÊàÍ";
					mes "¹Õè¤×Í´Ô¹á´¹·ÕèÁÕ¤ÇÒÁàÊÕèÂ§ÊÙ§!";
					mes "àÍÒÅèĞ ÍÒÇØ¸äË¹·Õè¤Ø³ÍÂÒ¡ãËé©Ñ¹ÅÍ§à¾ÔèÁªèÍ§?";
					next;
					switch(select("Hunter Bow:Survivor's Rod(INT):Zweihander:Flamberge:Infiltrator:Ballista:Stunner:Berserk:Claymore"))
					{
						case 1: callfunc "Func_Socket",1718,1726,40,61,500,984,2,999,10;
						case 2: callfunc "Func_Socket",1619,1620,40,61,500,984,5,999,10;
						case 3: callfunc "Func_Socket",1168,1171,40,61,800,984,5,999,10;
						case 4: callfunc "Func_Socket",1129,1149,40,61,500,984,2,999,10;
						case 5: callfunc "Func_Socket",1261,1266,40,61,700,984,5,999,10;
						case 6: callfunc "Func_Socket",1722,1727,40,61,500,984,5,999,10;
						case 7: callfunc "Func_Socket",1522,1532,40,61,500,984,2,999,10;
						case 8: callfunc "Func_Socket",1814,1816,40,61,500,984,5,999,10;
						case 9: callfunc "Func_Socket",1163,1172,40,61,500,984,2,999,10; // NPC says "5 Oridecon" (Aegis) but takes only 2
					}
				case 4:
					mes "[NPC à¨ÒĞÃÙ]";
					mes "ÇĞ ÇĞ ÇĞ ÇĞ...";
					mes "àÍÊ¤ÅÒÊàËÃÍ? ãªéä´é...";
					mes "¤§¨Ğà»ç¹àÃ×èÍ§ÁËÑÈ¨ÃÃÂìÁÒ¡ËÒ¡©Ñ¹ÊÒÁÒÃ¶´Ö§ÊÔè§¹ÕéÍÍ¡ÁÒä´é¨ÃÔ§";
					mes "âÍà¤... àÃÒ¨ĞÅÍ§à¾ÔèÁ Slot ÍÒÇØ¸äË¹´ÙÅèĞ?";
					next;
					switch(select("Gungnir:Poison Knife:Ice Pick:Sucsamad:Ginnungagap:Cutlas:Crescent Scythe:Survivor's Rod(DEX)"))
					{
						case 1: callfunc "Func_Socket", 1413, 1418,40,51,1000,984,5,999,10;
						case 2: callfunc "Func_Socket", 1239,13016,40,51,1000,984,5,999,10;
						case 3: callfunc "Func_Socket", 1230,13017,40,51,2000,984,5,999,10;
						case 4: callfunc "Func_Socket", 1236,13018,40,51,1000,984,5,999,10;
						case 5: callfunc "Func_Socket",13002,13019,40,51,1000,984,5,999,10;
						case 6: callfunc "Func_Socket", 1135,13400,40,51,1000,984,5,999,10;
						case 7: callfunc "Func_Socket", 1466, 1476,40,51,1000,984,5,999,10;
						case 8: callfunc "Func_Socket", 1617, 1618,40,51,2000,984,5,999,10;
					}
			}
		case 2:
			mes "[NPC à¨ÒĞÃÙ]";
			mes "à¡ÃÒĞ¤Ø³¾Ù´?";
			mes "á¹è¹Í¹äÁèÁÕ»Ñ­ËÒ.";
			mes "ªØ´à¡ÃÒĞáºè§ÍÍ¡à»ç¹ 4 ¤ÅÒÊ·Õèáµ¡µèÒ§¡Ñ¹ ¢Öé¹ÍÂÙè¡Ñº¤ÇÒÁÂÒ¡ã¹¡ÒÃ·Ó§Ò¹";
			mes "¤ÅÒÊ C ¹Ñé¹§èÒÂ·ÕèÊØ´ áÅĞ¤ÅÒÊ S ¹Ñé¹à»ç¹¤ÅÒÊ·ÕèÂÒ¡·ÕèÊØ´";
			mes "¤ÅÒÊäË¹·Õè¤Ø³ÍÂÒ¡ÅÍ§?";
			next;
			switch(select("C Class:B Class:A Class:S Class"))
			{
				case 1:
					mes "[NPC à¨ÒĞÃÙ]";
					mes "à¡ÃÒĞ¤ÅÒÊ C ãªèäËÁ?";
					mes "¿Ñ§´ÙÊÁàËµØÊÁ¼Å";
					mes "à¡ÃÒĞã´·Õè¤Ø³µéÍ§¡ÒÃÅÍ§à¾ÔèÁªèÍ§?";
					next;
					switch(select("Mantle:Coat:Circlet:Biretta"))
					{
						case 1: callfunc "Func_Socket",2307,2308,40,66,200,999,3;
						case 2: callfunc "Func_Socket",2309,2310,40,66,200,999,3;
						case 3: callfunc "Func_Socket",2232,2233,40,66,200,999,3;
						case 4: callfunc "Func_Socket",2216,2217,40,66,200,999,3;
					}
				case 2:
					mes "[NPC à¨ÒĞÃÙ]";
					mes "¤Ø³ä´éàÅ×Í¡¤ÅÒÊ B â´Âà©ÅÕèÂ";
					mes "áÅéÇ¤Ø³ÁÕà¡ÃÒĞáººäË¹ÅèĞ?";
					next;
					switch(select("Mirror Shield:Chain Mail:Saint Robe:Silk Robe:Boots:Shoes:Muffler:Guard:Buckler:Shield:Bongun Hat"))
					{
						case 1:  callfunc "Func_Socket",2107,2108,40,61,250,999,5;
						case 2:  callfunc "Func_Socket",2314,2315,40,61,250,999,5;
						case 3:  callfunc "Func_Socket",2325,2326,40,61,300,999,5;
						case 4:  callfunc "Func_Socket",2321,2322,40,61,300,999,5;
						case 5:  callfunc "Func_Socket",2405,2406,40,61,300,999,5;
						case 6:  callfunc "Func_Socket",2403,2404,40,61,300,999,5;
						case 7:  callfunc "Func_Socket",2503,2504,40,61,300,999,5;
						case 8:  callfunc "Func_Socket",2101,2102,40,61,300,999,5;
						case 9:  callfunc "Func_Socket",2103,2104,40,61,300,999,5;
						case 10: callfunc "Func_Socket",2105,2106,40,61,250,999,5;
						case 11: callfunc "Func_Socket",5046,5168,40,61,250,999,5;
					}
				case 3:
					mes "[NPC à¨ÒĞÃÙ]";
					mes "âÍé ¤ÅÒÊàÍ";
					mes "¹Õè¤×Í´Ô¹á´¹·ÕèÁÕ¤ÇÒÁàÊÕèÂ§ÊÙ§!";
					mes "àÍÒÅèĞ ¤Ø³ÍÂÒ¡ãËé©Ñ¹ÅÍ§à¾ÔèÁªØ´à¡ÃÒĞäË¹";
					next;
					switch(select("Gemmed Sallet:Bucket Hat:Memory Book:Tights:Legion Plate Armor:Full Plate:Thief Clothes:Greaves:Coif:Manteau:Helm:Ninja Suit:Orc Helm:Ancient Cape:Monk Hat:Golden Gear:Brooch:Munak Hat"))
					{
						case 1:  callfunc "Func_Socket",2230,2231,40,61,400,985,1;
						case 2:  callfunc "Func_Socket",5114,5120,40,61,400,985,1;
						case 3:  callfunc "Func_Socket",2109,2121,40,61,400,985,1;
						case 4:  callfunc "Func_Socket",2330,2331,40,61,400,985,1;
						case 5:  callfunc "Func_Socket",2341,2342,40,61,400,985,1;
						case 6:  callfunc "Func_Socket",2316,2317,40,61,400,985,1;
						case 7:  callfunc "Func_Socket",2335,2336,40,61,400,985,1;
						case 8:  callfunc "Func_Socket",2411,2412,40,61,400,985,1;
						case 9:  callfunc "Func_Socket",5092,5093,40,61,400,985,1;
						case 10: callfunc "Func_Socket",2505,2506,40,61,400,985,1;
						case 11: callfunc "Func_Socket",2228,2229,40,61,400,985,1;
						case 12: callfunc "Func_Socket",2337,2359,40,61,400,985,1;
						case 13: callfunc "Func_Socket",2299,5157,40,61,400,985,1;
						case 14: callfunc "Func_Socket",2507,2525,40,61,400,985,1;
						case 15: callfunc "Func_Socket",2251,5158,40,61,400,985,1;
						case 16: callfunc "Func_Socket",2246,5159,40,61,400,985,1;
						case 17: callfunc "Func_Socket",2605,2625,40,61,400,985,1;
						case 18: callfunc "Func_Socket",2264,5167,40,61,300,985,1;
					}
				case 4:
					mes "[NPC à¨ÒĞÃÙ]";
					mes "àÍèÍ... ¤ÅÒÊ S?";
					mes "¤Ø³á¹èã¨à¡ÕèÂÇ¡ÑºàÃ×èÍ§¹Õé?";
					mes "àÍÒÅèĞ... ºÍ¡ãËé©Ñ¹ÃÙé¶Ö§ªØ´à¡ÃÒĞ·Õè¤Ø³µéÍ§¡ÒÃà¾ÔèÁªèÍ§ áÅéÇ©Ñ¹¨ĞºÍ¡ÇèÒ©Ñ¹µéÍ§ÅÍ§·ÓÍĞäÃ";
					next;
					switch(select("Majestic Goat:Spiky Band:Bone Helm:Corsair:Crown:Tiara:Sphinx Hat:Robe of Cast:Earring:Ring:Bow Thimble"))
					{
						case 1:  callfunc "Func_Socket",2256,5160,40,51,2000,985,2;
						case 2:  callfunc "Func_Socket",2258,5161,40,51,2000,985,2;
						case 3:  callfunc "Func_Socket",5017,5162,40,51,2000,985,2;
						case 4:  callfunc "Func_Socket",5019,5163,40,51,2000,985,2;
						case 5:  callfunc "Func_Socket",2235,5165,40,51,2000,985,2;
						case 6:  callfunc "Func_Socket",2234,5164,40,51,2000,985,2;
						case 7:  callfunc "Func_Socket",5053,5166,40,51,1000,985,2;
						case 8:  callfunc "Func_Socket",2343,2360,40,51,1000,985,2;
						case 9:  callfunc "Func_Socket",2602,2622,40,51,1000,985,2;
						case 10: callfunc "Func_Socket",2601,2621,40,51,1000,985,2;
						case 11: callfunc "Func_Socket",2619,2671,40,51,1000,985,2;
					}
			}
		case 3:
			mes "[NPC à¨ÒĞÃÙ]";
			mes "àÍÒÅèĞ ©Ñ¹ÂÑ§äÁèä´é¢Ñ´à¡ÅÒÈÔÅ»Ğ¢Í§ Slot Addition àÅÂ";
			mes " ÁÑ¹«Ñº«éÍ¹ÁÒ¡¨¹©Ñ¹µéÍ§â¡Ë¡¶éÒ©Ñ¹ºÍ¡¤Ø³ÇèÒ©Ñ¹ÃÙé·Ø¡»Ñ¨¨ÑÂ·ÕèÊè§¼ÅµèÍ¡ÃĞºÇ¹¡ÒÃ¹Õé";
			mes "¶Ö§¡ÃĞ¹Ñé¹ ©Ñ¹ÊÑ§à¡µàËç¹á¹Çâ¹éÁºÒ§ÍÂèÒ§...";
			next;
			mes "[NPC à¨ÒĞÃÙ]";
			mes " ã¹ºÒ§àÁ×Í§ ¡ÒÃà¾ÔèÁªèÍ§¨Ğ»ÃĞÊº¤ÇÒÁÊÓàÃç¨ÁÒ¡¡ÇèÒÊÓËÃÑºÍØ»¡Ã³ì·ÕèÁÕ¡ÒÃÍÑ¾à¡Ã´¹éÍÂ¡ÇèÒ";
			mes "ã¹àÁ×Í§Í×è¹ ÊÔè§·ÕèµÃ§¡Ñ¹¢éÒÁ¤×Í¤ÇÒÁ¨ÃÔ§";
			mes "¹Ñè¹äÁèá»Å¡¨ÃÔ§æàËÃÍ?";
			next;
			mes "[NPC à¨ÒĞÃÙ]";
			mes "âÍé ÁÕºÒ§ÊÔè§·ÕèÊÓ¤Ñ­¨ÃÔ§æ ·Õè¤Ø³¤ÇÃÃÙé";
			mes "¶éÒ¤Ø³¢ÍãËé©Ñ¹à¾ÔèÁªèÍ§ãËé¡ÑººÒ§ÊÔè§ºÒ§ÍÂèÒ§ µÃÇ¨ÊÍºãËéá¹èã¨ÇèÒ¤Ø³äÁèÁÕªèÍ§¹Ñé¹ËÅÒÂªèÍ§ã¹¤ÅÑ§¢Í§¤Ø³";
			next;
			mes "[NPC à¨ÒĞÃÙ]";
			mes "¹Õè¤×ÍµÑÇÍÂèÒ§: ¶éÒ¤Ø³ÁÕ +7 Manteau áÅĞ Manteau »¡µÔã¹¡ÃĞà»ëÒ¢Í§¤Ø³ ©Ñ¹¨ĞÊØèÁàÅ×Í¡Ë¹Öè§ã¹¹Ñé¹ÊÓËÃÑº¡ÒÃà¾ÔèÁªèÍ§";
			mes "à¾ÕÂ§¨ÓäÇéÇèÒãËéÃĞÇÑ§";
			next;
			mes "[NPC à¨ÒĞÃÙ]";
			mes "ÍÕ¡¤ÃÑé§ ^FF0000¾¡ÍØ»¡Ã³ìÍÂèÒ§ã´ÍÂèÒ§Ë¹Öè§·Õè¤Ø³µéÍ§¡ÒÃãËé©Ñ¹à¾ÔèÁªèÍ§^000000";
			mes "ÍØ»¡Ã³ìÍ×è¹æ ·Ñé§ËÁ´·ÕèÁÕª×èÍà´ÕÂÇ¡Ñ¹ ¤ÇÃ¶Ù¡ÇÒ§äÇéã¹ Kafra Storage ¢Í§¤Ø³ à¢éÒã¨äËÁ?";
			close;
		case 4:
			mes "[NPC à¨ÒĞÃÙ]";
			mes "ã¨àÂç¹æ ¹Ğ ¹Ñ¡¼¨­ÀÑÂ";
			mes "¶éÒ¤Ø³µéÍ§¡ÒÃ·Õè¨ĞÅÍ§à¾ÔèÁªèÍ§ãËé¡ÑºÍØ»¡Ã³ì¢Í§¤Ø³ ¡ÃØ³Ò¡ÅÑºÁÒáÅĞá¨é§ãËéàÃÒ·ÃÒº";
			mes "«ÕÂĞ~";
			close;
	}
}

function	script	Func_Socket	{
	.@item_id = getarg(0);
	.@zeny_req = getarg(4);
	setarray .@item_req[0], getarg(5), getarg(7,0);
	setarray .@req_amount[0], getarg(6), getarg(8,0);

	disable_items;
	mes "[NPC à¨ÒĞÃÙ]";
	mes "¤Ø³µéÍ§¡ÒÃà¾ÔèÁÊÅçÍµãËé¡Ñº"+ getitemname(.@item_id) +"?";
	mes "àÍÒÅèĞ â»Ã´¾Ò©Ñ¹ÁÒ´éÇÂ ^FF0000"+ .@req_amount[0] +" "+ getitemname(.@item_req[0]) + (.@req_amount[0] > 1 && .@item_req[0] != 999 ? "s":"") +"^000000, "+ (.@item_req[1] != 0 && .@req_amount[1] != 0 ? ("^FF0000"+ .@req_amount[1] +" "+ getitemname(.@item_req[1]) + (.@req_amount[1] > 1 && .@item_req[1] != 999 ? "s":"") + "^000000 ") : "") + "and my ^FF0000" + (.@zeny_req >= 1000 ? (.@zeny_req /1000 +",000") : .@zeny_req) +",000 zeny^000000 ¤èÒºÃÔ¡ÒÃ.";
	mes "ÍéÍ áÅéÇÍÂèÒÅ×ÁàÍÒÍÑ¹¹Ñé¹ÁÒ´éÇÂÅèĞ "+ getitemname(.@item_id) +"!";
	next;
	mes "[NPC à¨ÒĞÃÙ]";
	if (getiteminfo(.@item_id, ITEMINFO_LOCATIONS) & EQP_HAND_R) // weapon
	{
		mes "©Ñ¹ÊÒÁÒÃ¶ÅÍ§à¾ÔèÁªèÍ§ä´éµÍ¹¹Õé¶éÒ¤Ø³ÁÕäÍà·Á·ÕèµéÍ§¡ÒÃáÅĞ zeny";
		mes "ÍÂèÒ§äÃ¡çµÒÁ ¤Ø³¤ÇÃÃÙéÇèÒÁÕâÍ¡ÒÊ·Õè©Ñ¹¨ĞÅéÁàËÅÇ";
		mes "à¾ÃÒĞ©Ğ¹Ñé¹ ©Ñ¹¨Óà»ç¹µéÍ§àµ×Í¹¤Ø³ÍÂèÒ§ÂØµÔ¸ÃÃÁ...";
		next;
		mes "[NPC à¨ÒĞÃÙ]";
		mes "ËÒ¡¤ÇÒÁ¾ÂÒÂÒÁã¹¡ÒÃà¾ÔèÁªèÍ§ãËé¡ÑºÍÒÇØ¸¢Í§¤Ø³ÅéÁàËÅÇ ´Ñ§¹Ñé¹ ^FF0000Weapon^000000, ^FF0000áÅĞ¡ÒÃì´ã´æ ·Õè»ÃĞ¡Íºà¢éÒ´éÇÂ¡Ñ¹¨Ğ¶Ù¡·ÓÅÒÂ^000000";
	}
	else // armor
	{
		mes "¶éÒ¤Ø³ÁÕÇÑµ¶Ø´Ôº·Õè¨Óà»ç¹·Ñé§ËÁ´ ¤èÒºÃÔ¡ÒÃ zeny ¢Í§©Ñ¹ áÅĞªØ´à¡ÃÒĞ àÃÒ¡çÊÒÁÒÃ¶´Óà¹Ô¹¡ÒÃà¾ÔèÁ Slot µèÍä»ä´é";
  	mes "áµè¡èÍ¹Ë¹éÒ¹Ñé¹ ©Ñ¹µéÍ§àµ×Í¹¤Ø³¶Ö§¤ÇÒÁàÊÕèÂ§";
		next;
		mes "[NPC à¨ÒĞÃÙ]";
		mes "ËÒ¡¤ÇÒÁ¾ÂÒÂÒÁã¹¡ÒÃà¾ÔèÁªèÍ§ãËé¡ÑºªØ´à¡ÃÒĞ¢Í§¤Ø³ÅéÁàËÅÇ ´Ñ§¹Ñé¹ ^FF0000Armor^000000, ^FF0000 ¨Ğà»ç¹¡ÒÃÍÑ¾à¡Ã´^000000 ^FF0000 áÅĞ¡ÒÃì´ã´æ ·Õè»ÃĞ¡Íºà¢éÒ´éÇÂ¡Ñ¹¨Ğ¶Ù¡·ÓÅÒÂ^000000";
	}
	mes "¤Ø³ÂÑ§µéÍ§¡ÒÃÅÍ§à¾ÔèÁªèÍ§ËÃ×ÍäÁè?";
	next;
	switch(select("¾ÂÒÂÒÁà¾ÔèÁªèÍ§: Â¡àÅÔ¡"))
	{
		case 1:
			if ((Zeny >= .@zeny_req*1000) && countitem(.@item_req[0]) >= .@req_amount[0] && countitem(getarg(7,512)) >= .@req_amount[1] && countitem(.@item_id) > 0)// if there's no getarg(7) and getarg(8) provided, check itemcount against 0 (we still need a valid item ID though)
			{
				mes "[NPC à¨ÒĞÃÙ]";
				mes "àÍÒÅèĞ àÃÔèÁ§Ò¹ä´éàÅÂ!";
  			mes " ¤Ø³¤ÇÃÍ¸ÔÉ°Ò¹¢ÍãËé»ÃĞÊº¼ÅÊÓàÃç¨¨Ğ´Õ¡ÇèÒ";
				next;
				set .@a, rand(1,100);
				if ((.@a > getarg(2)) && (.@a < getarg(3)))
				{
					specialeffect getarg(3) == 51 ? EF_LORD : EF_SANCTUARY; // only S Class items have Lord of Vermillion effect
					mes "[NPC à¨ÒĞÃÙ]";
					mes "àÂÕèÂÁÁÒ¡ ´ÙàËÁ×Í¹ÇèÒ¨Ğ»ÃĞÊº¤ÇÒÁÊÓàÃç¨";
  				mes " ÁÑ¹´Ù·Óä´é´Õ·Õà´ÕÂÇ ÂÔ¹´Õ´éÇÂ!";
					delitem .@item_id,1;
					delitem .@item_req[0],.@req_amount[0];
					if (.@item_req[1] != 0 && .@req_amount[1] != 0)
						delitem .@item_req[1],.@req_amount[1];
					Zeny = Zeny - .@zeny_req *1000;
					getitem getarg(1),1;
					next;
					mes "[NPC à¨ÒĞÃÙ]";
					mes "áÅéÇ¾º¡Ñ¹ãËÁè¹Ğà¾×èÍ¹!";
					close;
				}
				else
				{
					specialeffect EF_SUI_EXPLOSION;
					mes "[NPC à¨ÒĞÃÙ]";
					mes "ÇéÒÇ! ...©Ñ¹¢Íâ·É ÁÑ¹ÅéÁàËÅÇ";
					mes "ÍÂèÒ§äÃ¡çµÒÁ ©Ñ¹ºÃÔÊØ·¸Ôì¨ÃÔ§æ";
					mes "¹Õè¤×Íâª¤¢Í§¤Ø³ áÅĞÁÑ¹¶Ù¡ÅÔ¢Ôµâ´Â¾ÃĞà¨éÒ âÍà¤äËÁ?";
					mes "ÍÂèÒ¼Ô´ËÇÑ§àÅÂ áÅĞ¾ÂÒÂÒÁ¤ÃÑé§Ë¹éÒ";
					delitem .@item_id,1;
					delitem .@item_req[0],.@req_amount[0];
					if (.@item_req[1] != 0 && .@req_amount[1] != 0)
						delitem .@item_req[1],.@req_amount[1];
					Zeny = Zeny - .@zeny_req *1000;
					next;
					mes "[NPC à¨ÒĞÃÙ]";
					mes " ©Ñ¹¢ÍãËé¤Ø³âª¤´Õã¹¤ÃÑé§µèÍä»!";
					close;
				}
			}
			else
			{
				mes "[NPC à¨ÒĞÃÙ]";
				mes " ©Ñ¹ÍÂÒ¡¨Ğ´Óà¹Ô¹¡ÒÃµèÍ´éÇÂ¡ÒÃà¾ÔèÁ Slot ¹Õé áµè¤Ø³ÂÑ§¢Ò´ºÒ§ÊÔè§ä»";
  			mes "¤Ø³á¹èã¨ÇèÒ¤Ø³ÁÕÍØ»¡Ã³ì, ÇÑÊ´Ø·Õè¨Óà»ç¹ áÅĞ zeny?";
				close;
			}
		case 2:
			mes "[NPC à¨ÒĞÃÙ]";
			mes "µéÍ§¡ÒÃàÇÅÒ¤Ô´à¡ÕèÂÇ¡ÑºÁÑ¹Ë¹èÍÂÁÑéÂ?";
			mes "àÍÒÅèĞ ©Ñ¹à¢éÒã¨áÅéÇ";
			mes "á¤è¨ÓäÇéÇèÒªÕÇÔµÁÑ¹äÁèÊ¹Ø¡àÅÂ ¶éÒ¤Ø³ãªéªÕÇÔµÍÂèÒ§»ÅÍ´ÀÑÂÍÂÙèàÊÁÍ~";
			close;
	}
}

payon,140,151,5	duplicate(SocketEnchant)	Seiyablem#pay	84
lhz_in02,281,35,5	duplicate(SocketEnchant)	Seiyablem#lhz	84
prt_in,33,70,5	duplicate(SocketEnchant)	Seiyablem#prt	84
morocc,163,90,4	duplicate(SocketEnchant)	NPC à¨ÒĞÃÙ#moc	617

-	script	Young Man#dummy::SocketMan	-1,{
	mes "[Young Man]";
	mes "I'm considering becoming a Slotting Engineer.";
	mes "It's a new field where you can add Slots to equipment, and it'd be cool if I can work in such a lucrative career.";
	next;
	mes "[Young Man]";
	mes "There's a huge element of luck involved in successfully adding Slots from what I can understand.";
	mes "You fail sometimes, but if you're super lucky, you can add two Slots.";
	mes "Crazy. Huh?";
	next;
	mes "[Young Man]";
	mes "But don't get too excited.";
	mes "Only certain equipment can handle the addition of two extra Slots.";
	mes "There's so much more I have to learn before I can even be an apprentice...";
	close;
}

prt_in,31,57,1	duplicate(SocketMan)	Young Man#prt	97
payon,143,143,7	duplicate(SocketMan)	Young Man#pay	97
morocc,60,42,3	duplicate(SocketMan)	Young Man#moc	97
lhz_in02,269,33,5	duplicate(SocketMan)	Young Man#lhz	97
